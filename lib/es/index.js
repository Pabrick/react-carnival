import{jsxs as n,jsx as e}from"react/jsx-runtime";import{useRef as t,useState as r,useMemo as a,useEffect as o,useCallback as i}from"react";var s=[],d=[];!function(n,e){if(n&&"undefined"!=typeof document){var t,r=!0===e.prepend?"prepend":"append",a=!0===e.singleTag,o="string"==typeof e.container?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(a){var i=s.indexOf(o);-1===i&&(i=s.push(o)-1,d[i]={}),t=d[i]&&d[i][r]?d[i][r]:d[i][r]=l()}else t=l();65279===n.charCodeAt(0)&&(n=n.substring(1)),t.styleSheet?t.styleSheet.cssText+=n:t.appendChild(document.createTextNode(n))}function l(){var n=document.createElement("style");if(n.setAttribute("type","text/css"),e.attributes)for(var t=Object.keys(e.attributes),a=0;a<t.length;a++)n.setAttribute(t[a],e.attributes[t[a]]);var i="prepend"===r?"afterbegin":"beforeend";return o.insertAdjacentElement(i,n),n}}(".carnival {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  min-height: 10px;\n  min-width: 20px;\n  background-color: transparent;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  pointer-events: all;\n  cursor: pointer;\n}\n.carnival__bar {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n  background-color: orange;\n  pointer-events: none;\n}\n.carnival__zone {\n  position: absolute;\n  height: 100%;\n  top: 0;\n  background-color: green;\n  z-index: 1;\n  pointer-events: none;\n}\n.carnival__marker {\n  position: relative;\n  background-color: black;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 1px;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  z-index: 2;\n  pointer-events: none;\n}\n.carnival__marker .arrow {\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-left-width: 10px;\n  border-right-width: 10px;\n  border-bottom-width: 0;\n  border-color: black transparent transparent transparent;\n  transform: rotate(0deg) translateX(-50%) translateY(0%);\n}",{});const l=({onSuccess:s,onFailure:d,size:l,duration:c,random:u=!1})=>{const p=t(null),h=t(null),[f,m]=r({width:0,left:0}),g=p.current?.offsetWidth||0,b=p.current?.offsetHeight||0,v=g*l/100,x=a((()=>{return u?(n=g-v,Math.floor(Math.random()*(Math.floor(n)+1))):(g-v)/2;var n}),[u,g,v]);o((()=>{m({width:v,left:x})}),[p,v,x]);const[w,_]=r("right"),[y,k]=r("running"),[z,A]=r(0),N=t(0),M=t(0),T=i((n=>{if("running"===y){const e=100*(n-M.current)/c,t="right"===w?1:-1;A((n=>{const r=n+e*t;let a=Math.round(100*r)/100;var o;return a>100&&(a=100),a<0&&(a=0),(o=a)>=100&&_("left"),o<=0&&_("right"),a}))}M.current=n,N.current=requestAnimationFrame(T)}),[y,w,c]);o((()=>(N.current=requestAnimationFrame(T),()=>cancelAnimationFrame(N.current))),[T]);const C=()=>{const n=h.current?.offsetLeft||0,e=f.left,t=f.left+f.width;n>=e&&n<=t?s():d()};return n("section",{className:"carnival","data-testid":"carnival",onMouseDownCapture:()=>{k("paused"),C()},onMouseUpCapture:()=>{k("running")},children:[e("div",{className:"carnival__bar",ref:p}),e("div",{className:"carnival__zone","data-testid":"zone",style:{left:`${f.left}px`,width:`${f.width}px`}}),e("div",{className:"carnival__marker","data-testid":"marker",ref:h,style:{left:`${z}%`},children:e("div",{className:"arrow",style:{borderTopWidth:b/2+"px"}})})]})};export{l as Carnival};
//# sourceMappingURL=index.js.map
