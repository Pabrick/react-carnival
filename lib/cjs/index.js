"use strict";var e=require("react/jsx-runtime"),n=require("react"),t=[],r=[];!function(e,n){if(e&&"undefined"!=typeof document){var a,i=!0===n.prepend?"prepend":"append",o=!0===n.singleTag,s="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(o){var l=t.indexOf(s);-1===l&&(l=t.push(s)-1,r[l]={}),a=r[l]&&r[l][i]?r[l][i]:r[l][i]=c()}else a=c();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function c(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),r=0;r<t.length;r++)e.setAttribute(t[r],n.attributes[t[r]]);var a="prepend"===i?"afterbegin":"beforeend";return s.insertAdjacentElement(a,e),e}}(".carnival {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  min-height: 10px;\n  min-width: 20px;\n  background-color: transparent;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  pointer-events: all;\n  cursor: pointer;\n}\n.carnival__bar {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n  background-color: orange;\n  pointer-events: none;\n}\n.carnival__zone {\n  position: absolute;\n  height: 100%;\n  top: 0;\n  background-color: green;\n  z-index: 1;\n  pointer-events: none;\n}\n.carnival__marker {\n  position: relative;\n  background-color: black;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 1px;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  z-index: 2;\n  pointer-events: none;\n}\n.carnival__marker .arrow {\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-left-width: 10px;\n  border-right-width: 10px;\n  border-bottom-width: 0;\n  border-color: black transparent transparent transparent;\n  transform: rotate(0deg) translateX(-50%) translateY(0%);\n}",{});exports.Carnival=({onSuccess:t,onFailure:r,size:a,duration:i,random:o=!1})=>{const s=n.useRef(null),l=n.useRef(null),[c,d]=n.useState({width:0,left:0}),u=s.current?.offsetWidth||0,p=s.current?.offsetHeight||0,h=u*a/100,f=n.useMemo((()=>{return o?(e=u-h,Math.floor(Math.random()*(Math.floor(e)+1))):(u-h)/2;var e}),[o,u,h]);n.useEffect((()=>{d({width:h,left:f})}),[s,h,f]);const[g,m]=n.useState("right"),[b,v]=n.useState("running"),[x,w]=n.useState(0),_=n.useRef(0),y=n.useRef(0),k=n.useCallback((e=>{if("running"===b){const n=100*(e-y.current)/i,t="right"===g?1:-1;w((e=>{const r=e+n*t;let a=Math.round(100*r)/100;var i;return a>100&&(a=100),a<0&&(a=0),(i=a)>=100&&m("left"),i<=0&&m("right"),a}))}y.current=e,_.current=requestAnimationFrame(k)}),[b,g,i]);n.useEffect((()=>(_.current=requestAnimationFrame(k),()=>cancelAnimationFrame(_.current))),[k]);const j=()=>{const e=l.current?.offsetLeft||0,n=c.left,a=c.left+c.width;e>=n&&e<=a?t():r()};return e.jsxs("section",{className:"carnival","data-testid":"carnival",onMouseDownCapture:()=>{v("paused"),j()},onMouseUpCapture:()=>{v("running")},children:[e.jsx("div",{className:"carnival__bar",ref:s}),e.jsx("div",{className:"carnival__zone","data-testid":"zone",style:{left:`${c.left}px`,width:`${c.width}px`}}),e.jsx("div",{className:"carnival__marker","data-testid":"marker",ref:l,style:{left:`${x}%`},children:e.jsx("div",{className:"arrow",style:{borderTopWidth:p/2+"px"}})})]})};
//# sourceMappingURL=index.js.map
